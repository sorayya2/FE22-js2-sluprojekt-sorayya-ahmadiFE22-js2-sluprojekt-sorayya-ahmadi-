{"mappings":"imBAsBA,IAAAA,EACAC,E,iFArBA,IAAIC,EAAU,CAAC,EAoBfF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,GAElC,EAaAL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,CACT,C,ICpBAE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,iPCAzD,IAAAC,EAAAJ,EAAA,S,aCAAI,EAAAJ,EAAA,S,mBCAAK,EAAiB,IAAAC,IAAoBN,EAAA,SAAAO,QAA6C,qBAAAC,KAAUC,W,MCA5FC,EAAiB,IAAAJ,IAAoBN,EAAA,SAAAO,QAA6C,qBAAAC,KAAUC,W,MCA5FE,EAAiB,IAAAL,IAAoBN,EAAA,SAAAO,QAA6C,qBAAAC,KAAUC,WJI3F,MACC,IAAIG,EAAaC,eAAeC,QAAQ,QACpCC,EAASF,eAAeC,QAAQ,cAChCE,EAAkB,OAAXD,EAAkBH,EAAaG,EACnBE,SAASC,eAAe,kBAA/C,MAGMC,EAAoBF,SAASG,cAAc,eAC3CC,EAAuBJ,SAASG,cAAc,aAC9CE,EAAoBL,SAASG,cAAc,iBAG3CG,GAAQ,EAAAnB,EAAAoB,KAAIC,EAAAC,GAAI,mBAAmBV,EAAKW,kBAC9C,EAAAvB,EAAAwB,KAAIL,GAAOM,MAAMC,IACf,GAAIA,EAASC,SAAU,CACrB,MAAMC,SAAEA,EAAQC,IAAEA,EAAGC,OAAEA,EAAMC,WAAEA,GAAeL,EAASM,MACjDC,EAAwBpB,SAASG,cAAc,aACrD,OAAQe,GACN,IAAK,IACHE,EAAIC,IAAG,IAAAhC,IAAAD,GACP,MACF,IAAK,IACHgC,EAAIC,IAAG,IAAAhC,IAAAI,GACP,MACF,IAAK,IACH2B,EAAIC,IAAG,IAAAhC,IAAAK,GACP,MAEF,QAAS,OAAO,KAUlB,OANAW,EAAKiB,UAAYN,EACjBZ,EAAQkB,UAAYL,EACpBf,EAAKoB,UAAYP,EACjBnB,eAAe2B,WAAW,cAGnB,C,SAAER,E,IAAUC,E,OAAKC,E,WAAQC,EAClC,CACA,MAAO,CAAC,KACPN,MAAMY,IACPC,QAAQC,IAAI,0BAA2BF,GACvC,IAAIG,EAAW3B,SAASG,cAAc,YAEtC,MAAMyB,GAAe,EAAAzC,EAAAoB,KAAIC,EAAAC,GAAI,kBAG7B,EAAAtB,EAAA0C,SAAQD,GAAef,IACrBA,EAASiB,SAASC,IAChB,MAAMC,EAAWD,EAAcE,IACzBC,EAAYH,EAAcZ,MAC5Be,EAAUC,MAAQX,GAAUT,WAC9BU,QAAQC,IAAI,qDACZC,EAASS,WAAaF,EAAUG,QAAU,QAG5CZ,QAAQC,IAAIM,EAAUE,EAAA,GAExB,GACC,CACDI,UAAU,GACZ,GAaJ,EA3EC,GCDM,WACL,MAAMC,EAAmBvC,SAASC,eAChC,kBAEFsC,EAAiBC,MAAMC,QAAU,OAEjC,IAAI9C,EAAaC,eAAeC,QAAQ,QACpCC,EAASF,eAAeC,QAAQ,cAChC6C,EAAyB,OAAX5C,EAAkBH,EAAaG,EAC7CF,eAAeC,QAAQ,SAAW6C,IACpCH,EAAiBC,MAAMC,QAAU,QAEjCF,EAAiBI,iBAAiB,SAAUC,IAE1C,GADuBC,QAAQ,iBACT,CACpB,MAAMC,GAAa,EAAA3D,EAAAoB,KACjBC,EAAAC,GACA,mBAAqBb,eAAeC,QAAQ,SAE9CD,eAAemD,SACf,EAAA5D,EAAA6D,QAAOF,GACPG,OAAOC,SAASC,KAAO,cACzB,MACEZ,EAAiBC,MAAMC,QAAU,UAIzC,CDmDA,GKhFEzC,SAASC,eAAe,iBAAiB0C,iBAAiB,SAAS,KACjE/C,eAAemD,OAAK","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-abd86e9a265c1af8.js","src/modules/profile.ts","src/modules/deleteUser.ts","node_modules/@parcel/runtime-js/lib/runtime-386d90b133841afa.js","node_modules/@parcel/runtime-js/lib/runtime-2e2c8b55567bc683.js","node_modules/@parcel/runtime-js/lib/runtime-687f449525b34f15.js","src/modules/logout.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"6eg5j\\\":\\\"profile.609cf869.js\\\",\\\"lTuMP\\\":\\\"bild1.b50ad450.png\\\",\\\"fJoD7\\\":\\\"bild2.d876b3c7.png\\\",\\\"jiWxO\\\":\\\"bild3.ff522d17.png\\\",\\\"krb3m\\\":\\\"forumShows.dddbf656.js\\\"}\"));","import { ref, get, DataSnapshot, onValue } from \"firebase/database\";\r\nimport { db } from \"./firebaseApp\";\r\nimport { logOut } from \"./logout\";\r\nimport { deleteProfile } from \"./deleteUser\";\r\n(() => {\r\n  let usernameID = sessionStorage.getItem(\"user\");\r\n  let target = sessionStorage.getItem(\"targetUser\");\r\n  let test = target === null ? usernameID : target;\r\n  const myPicContainer = document.getElementById('myPicContainer') as HTMLDivElement\r\n\r\n\r\n  const namn: HTMLElement = document.querySelector(\"#UsernameID\");\r\n  const genders: HTMLElement = document.querySelector(\"#genderID\");\r\n  const bios: HTMLElement = document.querySelector(\"#bioIDmessege\");\r\n\r\n\r\n  const dbRef = ref(db, `/users/userInfo/${test.toLowerCase()}`);\r\n  get(dbRef).then((snapshot: DataSnapshot) => {\r\n    if (snapshot.exists()) {\r\n      const { username, bio, gender, profilePic } = snapshot.val();\r\n      const img: HTMLInputElement = document.querySelector(\"#ProfileP\");\r\n      switch (profilePic) {\r\n        case \"1\":\r\n          img.src = new URL('../img/bild1.png', import.meta.url);\r\n          break;\r\n        case \"2\":\r\n          img.src = new URL('../img/bild2.png', import.meta.url);\r\n          break;\r\n        case \"3\":\r\n          img.src = new URL('../img/bild3.png', import.meta.url);\r\n          break;\r\n\r\n        default: return null\r\n      }\r\n\r\n\r\n      bios.innerText = bio;\r\n      genders.innerText = gender;\r\n      namn.innerText = username;\r\n      sessionStorage.removeItem(\"targetUser\");\r\n\r\n\r\n      return { username, bio, gender, profilePic };\r\n    }\r\n    return {};\r\n  }).then((userInfo) => {\r\n    console.log(\"HELLO!!!!!! efter get: \", userInfo);\r\n    let messagge = document.querySelector(\"#message\") as HTMLDivElement;\r\n\r\n    const dbMessageRef = ref(db, `/Topics/Shows`);\r\n\r\n\r\n    onValue(dbMessageRef, (snapshot) => {\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childKey = childSnapshot.key;\r\n        const childData = childSnapshot.val();\r\n        if (childData.name == userInfo?.username) {\r\n          console.log(\"MATCHING NAME for message name & current username\");\r\n          messagge.innerHTML += childData.message + \"<br>\";\r\n\r\n        }\r\n        console.log(childKey, childData);\r\n\r\n      });\r\n    }, {\r\n      onlyOnce: true\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n})();\r\n\r\ndeleteProfile();\r\nlogOut();\r\n","import { ref, remove } from \"firebase/database\";\r\nimport { db } from \"./firebaseApp\";\r\n\r\nexport function deleteProfile(): void {\r\n  const deleteProfileBtn = document.getElementById(\r\n    \"delete-account\"\r\n  ) as HTMLButtonElement;\r\n  deleteProfileBtn.style.display = \"none\";\r\n\r\n  let usernameID = sessionStorage.getItem(\"user\");\r\n  let target = sessionStorage.getItem(\"targetUser\");\r\n  let currentUser = target === null ? usernameID : target;\r\n  if (sessionStorage.getItem(\"user\") == currentUser) {\r\n    deleteProfileBtn.style.display = \"block\";\r\n\r\n    deleteProfileBtn.addEventListener(\"click\", (e) => {\r\n      let deleteAccountBtn = confirm(\"Are you sure?\");\r\n      if (deleteAccountBtn) {\r\n        const deleteUser = ref(\r\n          db,\r\n          \"/users/userInfo/\" + sessionStorage.getItem(\"user\")\r\n        );\r\n        sessionStorage.clear();\r\n        remove(deleteUser);\r\n        window.location.href = \"./index.html\";\r\n      } else {\r\n        deleteProfileBtn.style.display = \"none\";\r\n      }\r\n    });\r\n  }\r\n}\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lTuMP\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"fJoD7\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"jiWxO\")).toString();","export function logOut(): void {\r\n  document.getElementById(\"logout-button\").addEventListener(\"click\", () => {\r\n    sessionStorage.clear();\r\n  });\r\n}\r\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$gdelx","$b1e6e3771541cacf$exports","URL","resolve","url","toString","$ce621a9d9cea4722$exports","$ae492eca28255390$exports","usernameID","sessionStorage","getItem","target","test","document","getElementById","namn","querySelector","genders","bios","dbRef","ref","$7McF0","db","toLowerCase","get","then","snapshot","exists","username","bio","gender","profilePic","val","img","src","innerText","removeItem","userInfo","console","log","messagge","dbMessageRef","onValue","forEach","childSnapshot","childKey","key","childData","name","innerHTML","message","onlyOnce","deleteProfileBtn","style","display","currentUser","addEventListener","e","confirm","deleteUser","clear","remove","window","location","href"],"version":3,"file":"profile.609cf869.js.map"}